---
sidebar_position: 2
---

# Download a file

This recipe downloads a file from a [Unity Catalog volume](https://docs.databricks.com/en/volumes/index.html) using the [Databricks SDK for Python](https://databricks-sdk-py.readthedocs.io/en/latest/).

:::note

Unlike notebooks, Databricks Apps does not support mounting Unity Catalog volumes and directly reading and writing files. As this code snippet demonstrates, each file needs to be downloaded to the app compute before being able to manipulate it.

:::

## Code snippet

```python title="app.py"
import reflex as rx
import os
from databricks.sdk import WorkspaceClient

w = WorkspaceClient()

class DownloadFileState(rx.State):
    download_file_path: str = ""

    async def handle_download(self):
        response = w.files.download(self.download_file_path)
        file_data = response.contents.read()
        file_name = os.path.basename(self.download_file_path)

        return rx.download(data=file_data, filename=file_name)
```

## Resources

- [Unity Catalog volume](https://docs.databricks.com/aws/en/files/volumes)

## Permissions

Your [app service principal](https://docs.databricks.com/aws/en/dev-tools/databricks-apps/#how-does-databricks-apps-manage-authorization) needs the following permissions:

- `USE CATALOG` on the volume's catalog
- `USE SCHEMA` on the volume's schema
- `READ VOLUME` on the volume

See [Privileges required for volume operations](https://docs.databricks.com/en/volumes/privileges.html#privileges-required-for-volume-operations) for more information.

## Dependencies

- [Databricks SDK for Python](https://pypi.org/project/databricks-sdk/) - `databricks-sdk`
- [Reflex](https://pypi.org/project/reflex/) - `reflex`

```python title="requirements.txt"
databricks-sdk
reflex
```
